import CodeBlock from "@/components/shared/Codeblock";
import Demo from "@/app/docs/environment-and-lifecycle/usePreferredLanguage/Demo";
import Table from "@/components/shared/Table";
import data from "@/app/docs/environment-and-lifecycle/usePreferredLanguage/data.json";

# usePreferredLanguage

### Manages and resolves the application language based on system settings and user overrides.

#### Installation

<CodeBlock
  code={`npm install @vibehooks/react/usePreferredLanguage`}
  language="bash"
/>

#### Description

A robust language management hook that looks for a user-defined preference in **localStorage**. If no user preference exists, it falls back to the system/browser language. It handles cross-tab synchronization and is safe for SSR.

#### Return values

<Table data={data.returnValues} />

#### Demo

<Demo />

#### Source code

```tsx
'use client';

import { usePreferredLanguage } from "@vibehooks/react/usePreferredLanguage";
import LayoutDemo from "@/layouts/LayoutDemo";

export default function Demo() {
  const { language , setUserLanguage, systemLanguage, userLanguage } = usePreferredLanguage();

  const handleChangeLanguage = (lang: string) => {
    setUserLanguage(lang);
  }
	return (
		<LayoutDemo
      title="Preferred Language"
    >
      <div className="w-full grid grid-cols-1 md:grid-cols-2">
        <p className="w-full text-center font-reddit-sans text-sm text-white/70">System default: <span className="font-bold font-reddit-sans text-white">{systemLanguage}</span></p>
        <p className="w-full text-center font-reddit-sans text-sm text-white/70">User choise: <span className="font-bold font-reddit-sans text-white">{userLanguage ?? "None"}</span></p>
      </div>
      <p className="font-reddit-sans text-white/60 text-sm">Resolved Language: <span>{language}</span></p>
      <div className="flex flex-row w-full items-center gap-4">
        <button className="w-full font-reddit-sans text-sm text-white/80 hover:text-white/90 transition-colors duration-500 ease-in-out border border-white/40 px-4 py-3 rounded-md cursor-pointer bg-neutral-900 hover:bg-neutral-950" onClick={() => handleChangeLanguage("en")}>
          English
        </button>
        <button className="w-full font-reddit-sans text-sm text-white/80 hover:text-white/90 transition-colors duration-500 ease-in-out border border-white/40 px-4 py-3 rounded-md cursor-pointer bg-neutral-900 hover:bg-neutral-950" onClick={() => handleChangeLanguage("es-PE")}>
          Spanish
        </button>
        <button className="w-full font-reddit-sans text-sm text-white/80 hover:text-white/90 transition-colors duration-500 ease-in-out border border-white/40 px-4 py-3 rounded-md cursor-pointer bg-neutral-900 hover:bg-neutral-950" onClick={() => handleChangeLanguage("")}>
          Clear
        </button>
      </div>
		</LayoutDemo>
	);
}
```
