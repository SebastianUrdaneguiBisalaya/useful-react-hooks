import CodeBlock from "@/components/shared/Codeblock";
import Demo from "@/app/docs/ai/useSpeech/Demo";
import Table from "@/components/shared/Table";
import data from "@/app/docs/ai/useSpeech/data.json";

# useSpeech

### Provides unopinionated, high-level access to the Web Speech API for speech-to-text recognition.

#### Installation

<CodeBlock
  code={`npm install @vibehooks/react/useSpeech`}
  language="bash"
/>

#### Description

The **useSpeech** wraps the **SpeechRecognition** interface, allowing developers to convert audio from a microphone into real-time text strings. It handles cross-browser prefixes (e.g., **webkitSpeechRecognition**), manages internal state transitions (listening, stopped, error), and cleans up listeners automatically.

**Important:** The **useSpeech** hook depends on the Web Speech API. At the time of writing, this API is only production-ready in **Google Chrome**. Other browsers may partially implement the interfaces but do not provide a stable recognition service.

To avoid non-deterministic behavior, crashes, or infinite restart loops, this hook performs a runtime browser check and will not activate outside of Chrome.

#### Parameters

<Table data={data.parameters} />

#### Return values

<Table data={data.returnValues} />

#### Demo

<Demo />

#### Source code

```tsx
'use client';

import { useSpeech } from "../../../../../../src";
import { Layout } from "@/layouts/Layout";
import { Button } from "@/components/ui/Button";
import { TextArea } from "@/components/ui/TextArea";

export default function Demo() {
  const { error, reset, start, status, stop, transcript } = useSpeech({
    lang: 'en-PE',
    continuous: true,
    interimResults: true,
  });

  if (status === 'unsupported') {
    return (
      <Layout>
        <Layout.ContentNotSupported>
          Speech API is not supported in this browser.
        </Layout.ContentNotSupported>
      </Layout>
    )
  };

	return (
		<Layout>
      <Layout.Title>
        Speech AI
      </Layout.Title>
      <Layout.Caption>
        Status: {status}
      </Layout.Caption>
      {error && <Layout.Error>Error: {error?.message}</Layout.Error>}
      <div className="flex flex-row gap-2">
        <Button.Primary onClick={start}>
          Start
        </Button.Primary>
        <Button.Warning onClick={stop}>
          Stop
        </Button.Warning>
        <Button.Destructive onClick={reset}>
          Cancel
        </Button.Destructive>
      </div>
      <TextArea.Primary
        readOnly
        value={transcript}
        placeholder="Transcript will appear here..."
      />
		</Layout>
	);
}
```
